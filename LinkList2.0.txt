//
//  main.m
//  DataLink
//
//  Created by ffm on 16/7/10.
//  Copyright Â© 2016å¹´ ITPanda. All rights reserved.
//å®ç°ä¸€ä¸ªå•å‘é“¾è¡¨ï¼Œå¹¶å†™ç¨‹åºæŠŠå•å‘é“¾è¡¨è¿›è¡Œé€†åº
//æœ¬æ¥æƒ³ç€å†å¢åŠ ä¸€ä¸ªï¼ŠendèŠ‚ç‚¹ï¼Œä½†æ˜¯è€ƒè™‘å†ä¸‰ï¼Œæ„ä¹‰ä¸å¤§ã€‚
//7.10æ›´æ–°ï¼Œé”€æ¯é“¾è¡¨ã€‚

#import <Foundation/Foundation.h>


typedef struct Node_{
    void *value;
    struct Node_ *next;
}Node;

Node *creatNode(void *value,Node *next){
    Node *node = malloc(sizeof(Node));
    node->value = value;
    node->next = next;
    return node;
}

void printList (Node *firstNode){
    for (Node *node=firstNode; node!=NULL; node=node->next) {
        printf("Current node value is %s\n",node->value);
    }
}
void reverse (Node *firstNode){
    //é¦–å…ˆåˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸ºç©ºæˆ–è€…é“¾è¡¨åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹
    if (firstNode==NULL||firstNode->next==NULL) {
        return;
    }
    Node *pre = firstNode;
    Node *mid = firstNode->next;
    Node *after = NULL;
    while (mid!=NULL) {
        after = mid->next;
        mid->next = pre;
        pre = mid;
        mid = after;
    }
    firstNode->next = NULL;
    firstNode = pre;
}

void destroy (Node *firstNode){
    Node *node = firstNode;
    Node *temp;
    while (node!=NULL) {
        temp = node;
        node = node->next;
        free(temp);
    }
}

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        Node *current = creatNode("ğŸ˜é“¾è¡¨åŸç‚¹åœ¨æ­¤ï¼", NULL);
        Node *first = current;
        
        current->next = creatNode("HelloWorld", NULL);      //é¡ºåºåˆ›å»ºèŠ‚ç‚¹
        current = current->next;
        
        current->next = creatNode("Hey_Jikexueyuan", NULL);
        current = current->next;
        
        current->next = creatNode("Im the last", NULL);
        current = current->next;
        
        //åœ¨æœ€å‰é¢æ’å…¥èŠ‚ç‚¹
        first = creatNode("I m NO.1", first);
        printf("before reverse\n");
        printList(first);
        
        reverse(first);
        printf("after reverse\n");
        printList(current);
        
        //é“¾è¡¨åˆ†é…äº†å†…å­˜è¦è®°å¾—é‡Šæ”¾ï¼ ä¼ å…¥çš„æ˜¯å¤´èŠ‚ç‚¹ï¼
        destroy(current);
        
        
    }
    return 0;
}
